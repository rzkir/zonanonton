---
export interface Props {
  class?: string;
  variant?: "default" | "poster" | "video" | "compact";
  hover?: boolean;
  noPadding?: boolean;
  as?: "div" | "article";
}

const {
  class: className = "",
  variant = "default",
  hover = false,
  noPadding = false,
  as: Tag = "div",
} = Astro.props;

const hasMedia = Astro.slots.has("media");
---

<Tag
  class:list={[
    "rounded-xl border border-white/5 overflow-hidden transition-all duration-300",
    variant === "poster" && "bg-white/5",
    variant === "video" && "bg-white/5",
    variant === "compact" && "bg-white/5 p-3",
    variant === "default" && "bg-white/5",
    hover && "card-hover",
    className,
  ]}
>
  {
    hasMedia && (
      <div
        class:list={[
          "relative overflow-hidden",
          variant === "poster" && "aspect-2/3",
          variant === "video" && "aspect-video",
        ]}
      >
        <slot name="media" />
      </div>
    )
  }

  <div
    class:list={[
      variant !== "compact" && !noPadding && "p-4",
      variant === "compact" && "p-0",
      noPadding && variant !== "compact" && "p-0",
    ]}
  >
    <slot name="header" />
    <slot />
    <slot name="footer" />
  </div>
</Tag>
